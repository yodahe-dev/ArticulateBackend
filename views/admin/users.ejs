
<h1>Manage Users</h1>

<% if (flash.success) { %>
  <div class="alert alert-success"><%= flash.success %></div>
<% } %>
<% if (flash.error) { %>
  <div class="alert alert-danger"><%= flash.error %></div>
<% } %>

<table>
  <thead>
    <tr>
      <th>Username</th>
      <th>Email</th>
      <th>Role</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% users.forEach(user => { %>
      <tr>
        <td><%= user.username %></td>
        <td><%= user.email %></td>
        <td>
          <form action="/admin/user/update-role/<%= user.id %>" method="POST">
            <select name="role">
              <option value="user" <%= user.role === 'user' ? 'selected' : '' %>>User</option>
              <option value="admin" <%= user.role === 'admin' ? 'selected' : '' %>>Admin</option>
              <option value="subadmin" <%= user.role === 'subadmin' ? 'selected' : '' %>>Subadmin</option>
            </select>
            <button type="submit">Update Role</button>
          </form>
        </td>
        <td>
          <form action="/admin/user/remove/<%= user.id %>" method="POST" onsubmit="return confirm('Are you sure you want to remove this user?');">
            <button type="submit" class="btn btn-danger">Remove Account</button>
          </form>
        </td>
      </tr>
    <% }); %>
  </tbody>
</table>
